#!/bin/bash
###########################################################################################
####                                  CODE SETTINGS                                    ####
####                               wallclock, convection                               ####
###########################################################################################
code_type="convection"

###########################################################################################
####                                     DIRECTORIES                                   ####
###########################################################################################
if [ "$code_type" = "convection" ]; then
    rm -rf data || true
    
    mkdir data
    
    mkdir data/data_ocean_temp
    mkdir data/data_ocean_veloc
    mkdir data/data_ocean_fluxu
    mkdir data/data_ocean_fluxd
fi

###########################################################################################
####                       COMPILATION OF THE MODEL AND CLEANING                       ####
###########################################################################################
source ./kernels/shell/compiler.sh

libfcompile kernels/math math.f90
libfcompile kernels/sph/ sph.f90
libfcompile kernels/fft/ fourier_transform.f90
libfcompile kernels/legepoly/ lege_poly.f90
libfcompile kernels/sphsvt/mod/ cleb.f90
libfcompile kernels/sphsvt/ sphsvt.f90
libfcompile kernels/equations/ equations.f90
libfcompile kernels/radgrid/ radial_grid.f90
libfcompile kernels/latgrid/mod/ grid_ops.f90
libfcompile kernels/latgrid/ lateral_grid.f90
libfcompile kernels/object/ physicalobject.f90
libfcompile code/ocean/ ocean.f90 ocean_constants.f90

$fcompile -D$code_type code/codes/BielyKralik.f90 *.o -o "Test_"$code_type".out"

libfclean
