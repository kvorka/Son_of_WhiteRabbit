#!/bin/bash
###########################################################################################
####                                 COMPILER SET UP                                   ####
###########################################################################################
fcompile="gfortran-12 -Ofast \
                      -march=native \
                      -fno-bounds-check \
                      -flto=auto \
                      -fwhole-program \
                      -fopenmp \
                      -Davx2 \
                      -cpp"

###########################################################################################
####                                  COMPILER FUNCTION                                ####
###########################################################################################
function libfcompile() {
    if [ ! -z "$3" ]
      then
        $fcompile -c $1/$3
    fi
    
    $fcompile -c $1/$2
    $fcompile -c $(find $1/smod/. -type f) &
    wait 
}